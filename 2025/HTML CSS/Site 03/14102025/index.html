<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Biblioteca da Faculdade Cat√≥lica de Bras√≠lia</title>
  <meta name="description" content="Biblioteca da Faculdade Cat√≥lica de Bras√≠lia ‚Äî acervo, renova√ß√£o online, empr√©stimo interbibliotec√°rio e apoio √† pesquisa.">

  <!-- Preload hero image to improve LCP -->
  <link rel="preload" as="image" href="img/entrada.jpg">

  <!-- Link para o CSS (caminho relativo correto) -->
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <!-- Skip link -->
  <a class="skip-link" href="#main">Pular para o conte√∫do</a>

  <!-- HEADER -->
  <header class="site-header" role="banner">
    <div class="container header-container">
      <a href="#inicio" class="logo-link" aria-label="Ir para In√≠cio">
        <img src="img/logo.png" alt="Faculdade Cat√≥lica de Bras√≠lia - Biblioteca" class="logo">
      </a>

      <nav id="mainNav" aria-label="Menu principal" role="navigation">
        <ul id="navList" class="menu">
          <li><a href="#inicio">In√≠cio</a></li>
          <li><a href="#acervo">Consulta ao Acervo</a></li>
          <li><a href="#renovacao">Renova√ß√£o</a></li>
          <li><a href="#servicos">Servi√ßos</a></li>
          <li><a href="#contato">Contato</a></li>
        </ul>
      </nav>

      <button id="menuToggle" aria-controls="navList" aria-expanded="false" aria-label="Abrir menu de navega√ß√£o">‚ò∞</button>
    </div>
  </header>

  <!-- MAIN -->
  <main id="main">
    <!-- HERO (background definido em css/style.css via .hero .hero-bg) -->
    <section id="inicio" class="hero" role="region" aria-label="Banner principal">
      <div class="hero-bg" aria-hidden="true"></div>
      <div class="overlay container">
        <h1>Biblioteca da Faculdade Cat√≥lica de Bras√≠lia</h1>
        <p>Um espa√ßo de saber, f√© e pesquisa</p>
        <a href="#acervo" class="btn">Consultar Acervo</a>
      </div>
    </section>

    <!-- SOBRE -->
    <section id="sobre" class="sobre container" aria-labelledby="sobre-titulo">
      <div class="texto">
        <h2 id="sobre-titulo">Sobre a Biblioteca</h2>
        <p>
          A Biblioteca da Faculdade Cat√≥lica de Bras√≠lia oferece aos alunos, professores e √† comunidade acad√™mica um ambiente acolhedor para estudo, pesquisa e aprendizado.
          Nosso acervo conta com milhares de t√≠tulos nas √°reas de Teologia, Filosofia, Educa√ß√£o, Psicologia e Ci√™ncias Humanas.
        </p>
      </div>
      <img src="img/interior.jpg"
           alt="Interior da Biblioteca"
           class="imagem-sobre">
    </section>

    <!-- SERVI√áOS -->
    <section id="servicos" class="servicos" aria-labelledby="servicos-titulo">
      <div class="container">
        <h2 id="servicos-titulo" class="titulo-secao">Nossos Servi√ßos</h2>
        <div class="cards" role="list">
          <article class="card" role="listitem" aria-labelledby="srv1">
            <h3 id="srv1">üìö Consulta ao Acervo</h3>
            <p>Acesse nosso cat√°logo f√≠sico e digital.</p>
          </article>
          <article class="card" role="listitem" aria-labelledby="srv2">
            <h3 id="srv2">üîÅ Renova√ß√£o Online</h3>
            <p>Renove seus empr√©stimos com facilidade.</p>
          </article>
          <article class="card" role="listitem" aria-labelledby="srv3">
            <h3 id="srv3">üéì Orienta√ß√£o de Pesquisa</h3>
            <p>Aux√≠lio na normaliza√ß√£o e refer√™ncias acad√™micas.</p>
          </article>
          <article class="card" role="listitem" aria-labelledby="srv4">
            <h3 id="srv4">üßæ Empr√©stimo Interbibliotec√°rio</h3>
            <p>Solicite livros de outras institui√ß√µes conveniadas.</p>
          </article>
          <article class="card" role="listitem" aria-labelledby="srv5">
            <h3 id="srv5">üíª Acesso Remoto</h3>
            <p>Consulte bases de dados e peri√≥dicos online.</p>
          </article>
        </div>
      </div>
    </section>

    <!-- ACERVO -->
    <section id="acervo" class="acervo container" aria-labelledby="acervo-titulo">
      <h2 id="acervo-titulo">Consulta ao Acervo</h2>
      <div class="busca-acervo" role="search" aria-label="Pesquisar acervo">
        <label for="buscaLivro" class="sr-only">Pesquisar por t√≠tulo ou autor</label>
        <input type="search" id="buscaLivro" name="q" placeholder="Digite o t√≠tulo ou autor" aria-label="Pesquisar no acervo">
        <button id="btnPesquisar" class="btn" type="button">Pesquisar</button>
      </div>
      <div id="resultados" aria-live="polite"></div>
    </section>

    <!-- RENOVA√á√ÉO -->
    <section id="renovacao" class="renovacao container" aria-labelledby="renovacao-titulo">
      <h2 id="renovacao-titulo">Renova√ß√£o de Empr√©stimo</h2>
      <form id="formRenovacao" action="#" method="post" novalidate>
        <div class="form-row">
          <label for="nome">Nome completo</label>
          <input id="nome" name="nome" type="text" placeholder="Nome completo" required>
        </div>
        <div class="form-row">
          <label for="matricula">Matr√≠cula</label>
          <input id="matricula" name="matricula" type="text" placeholder="Matr√≠cula" required>
        </div>
        <div class="form-row">
          <label for="codigoLivro">C√≥digo do livro</label>
          <input id="codigoLivro" name="codigo_livro" type="text" placeholder="C√≥digo do livro" required>
        </div>
        <div class="form-row">
          <label for="dataRenovacao">Data desejada</label>
          <input id="dataRenovacao" name="data_renovacao" type="date" required>
        </div>
        <button type="submit" class="btn">Solicitar Renova√ß√£o</button>
      </form>
      <p id="mensagemSucesso" class="mensagem-sucesso" role="status" aria-live="polite"></p>
    </section>

    <!-- CONTATO -->
    <section id="contato" class="contato" aria-labelledby="contato-titulo">
      <div class="container">
        <h2 id="contato-titulo" class="titulo-secao">Contato</h2>
        <div class="contato-grid">
          <div class="contato-info">
            <p><strong>Endere√ßo:</strong><br>QS 07, Lote 01 - Taguatinga, Bras√≠lia - DF</p>
            <p><strong>Telefone:</strong> <a href="tel:+556133330000">(61) 3333-0000</a></p>
            <p><strong>Email:</strong> <a href="mailto:biblioteca@catolica.edu.br">biblioteca@catolica.edu.br</a></p>
            <p><strong>Hor√°rio:</strong> Seg a Sex, 8h √†s 21h</p>
          </div>
          <div class="contato-mapa">
            <iframe
              src="https://www.google.com/maps?q=Faculdade+Cat%C3%B3lica+de+Bras%C3%ADlia&output=embed"
              loading="lazy"
              title="Mapa Biblioteca"
              referrerpolicy="no-referrer-when-downgrade"
              style="border:0;width:100%;height:100%;">
            </iframe>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- FOOTER -->
  <footer>
    <div class="container">
      <p>&copy; <span id="anoAtual"></span> Faculdade Cat√≥lica de Bras√≠lia - Biblioteca Universit√°ria</p>
    </div>
  </footer>

  <!-- SCRIPT (comportamento do menu, busca e formul√°rio ‚Äî mant√©m IDs usados no CSS) -->
  <script>
    // Atualiza ano no rodap√©
    (function() {
      const ano = new Date().getFullYear();
      const el = document.getElementById('anoAtual');
      if (el) el.textContent = ano;
    })();

    // Menu toggle + acessibilidade
    (function() {
      const menuToggle = document.getElementById('menuToggle');
      const navList = document.getElementById('navList');
      if (!menuToggle || !navList) return;

      menuToggle.addEventListener('click', () => {
        const expanded = menuToggle.getAttribute('aria-expanded') === 'true';
        menuToggle.setAttribute('aria-expanded', String(!expanded));
        navList.classList.toggle('open');
        if (!expanded) {
          const firstLink = navList.querySelector('a');
          if (firstLink) firstLink.focus();
        } else {
          menuToggle.focus();
        }
      });

      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          menuToggle.setAttribute('aria-expanded', 'false');
          navList.classList.remove('open');
          menuToggle.focus();
        }
      });
    })();

    // Busca demo (substituir por fetch('/api/...') no backend)
    (function() {
      const resultados = document.getElementById('resultados');
      const input = document.getElementById('buscaLivro');
      const btn = document.getElementById('btnPesquisar');
      if (!input || !btn || !resultados) return;

      const mockAcervo = [
        {id: 'A001', titulo: 'Introdu√ß√£o √† Teologia', autor: 'Jo√£o Silva', disponivel: true},
        {id: 'A002', titulo: 'Filosofia Moderna', autor: 'Maria Souza', disponivel: false},
        {id: 'A003', titulo: 'Psicologia da Educa√ß√£o', autor: 'Carlos Pereira', disponivel: true},
      ];

      function escapeHtml(text) {
        return String(text)
          .replaceAll('&', '&amp;')
          .replaceAll('<', '&lt;')
          .replaceAll('>', '&gt;')
          .replaceAll('"', '&quot;')
          .replaceAll("'", '&#039;');
      }

      function renderResultados(items) {
        if (!items.length) {
          resultados.innerHTML = '<p>Nenhum resultado encontrado.</p>';
          return;
        }
        const html = items.map(i => (
          `<div class="resultado-item">
             <strong>${escapeHtml(i.titulo)}</strong> ‚Äî ${escapeHtml(i.autor)}
             <div class="meta">C√≥digo: ${escapeHtml(i.id)} | ${i.disponivel ? 'Dispon√≠vel' : 'Indispon√≠vel'}</div>
           </div>`
        )).join('');
        resultados.innerHTML = html;
      }

      function buscarLivro() {
        const q = (input.value || '').trim().toLowerCase();
        if (!q) {
          resultados.innerHTML = '<p>Digite um termo para pesquisar.</p>';
          return;
        }
        const resultadosSimples = mockAcervo.filter(item =>
          item.titulo.toLowerCase().includes(q) || item.autor.toLowerCase().includes(q) || item.id.toLowerCase() === q
        );
        renderResultados(resultadosSimples);
      }

      btn.addEventListener('click', buscarLivro);
      input.addEventListener('keydown', (e) => { if (e.key === 'Enter') buscarLivro(); });
    })();

    // Form renova√ß√£o demo
    (function() {
      const form = document.getElementById('formRenovacao');
      const mensagem = document.getElementById('mensagemSucesso');
      if (!form || !mensagem) return;

      form.addEventListener('submit', (e) => {
        e.preventDefault();
        const data = new FormData(form);
        if (!data.get('nome') || !data.get('matricula') || !data.get('codigo_livro') || !data.get('data_renovacao')) {
          mensagem.textContent = 'Por favor, preencha todos os campos.';
          mensagem.className = 'mensagem-error';
          return;
        }
        mensagem.textContent = 'Renova√ß√£o solicitada (demo). Substitua por envio real ao backend.';
        mensagem.className = 'mensagem-sucesso';
        form.reset();
      });
    })();
  </script>
</body>
</html>
